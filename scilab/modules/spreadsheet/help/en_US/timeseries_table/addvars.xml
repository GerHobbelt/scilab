<?xml version="1.0" encoding="UTF-8"?>
<!--
 * Scilab ( https://www.scilab.org/ ) - This file is part of Scilab
 * Copyright (C) 2025 - Dassault SystÃ¨mes S.E. - Adeline CARNIS
 *
 * For more information, see the COPYING file which you should have received
 * along with this program.
 *
 -->
 <refentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svg="http://www.w3.org/2000/svg" xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:db="http://docbook.org/ns/docbook" xmlns:scilab="http://www.scilab.org" xml:lang="en" xml:id="addvars">
    <refnamediv>
        <refname>addvars</refname>
        <refpurpose>Add variables to table or timeseries</refpurpose>
    </refnamediv>
    <refsynopsisdiv>
        <title>Syntax</title>
        <synopsis>
            tout = addvars(tin, var1, ..., varN)
            tout = addvars(tin, var1, ..., varN, "Before", loc)
            tout = addvars(tin, var1, ..., varN, "After", loc)

            tout = addvars(tin, var1, ..., varN, "NewVariableNames", newvarnames)
            tout = addvars(tin, var1, ..., varN, "Before", loc, "NewVariableNames", newvarnames)
            tout = addvars(tin, var1, ..., varN, "After", loc, "NewVariableNames", newvarnames)
        </synopsis>
    </refsynopsisdiv>
    <refsection role="arguments">
        <title>Arguments</title>
        <variablelist>
            <varlistentry>
                <term>tin</term>
                <listitem>
                    <para>
                        <link linkend="table">table</link> or <link linkend="timeseries">timeseries</link>
                    </para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>var1, ..., varN</term>
                <listitem>
                    <para>
                        vector or matrix of doubles, strings, booleans, <link linkend="duration">duration</link> 
                        or <link linkend="datetime">datetime</link> corresponding to variables to add.
                    </para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>loc</term>
                <listitem>
                    <para>
                        double or string value specifying the location to insert the variables based on 
                        "After" or "Before" keywords.
                    </para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>newvarnames</term>
                <listitem>
                    <para>
                        string scalar or vector or cell containing the names of added variables. It must be used with "NewVariableNames" keyword.
                    </para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>tout</term>
                <listitem>
                    <para>
                        <link linkend="table">table</link> or <link linkend="timeseries">timeseries</link>
                    </para>
                </listitem>
            </varlistentry>
        </variablelist>
    </refsection>
    <refsection role="description">
        <title>Description</title>
        <para>
            <emphasis role="bold">tout = addvars(tin, var1, ..., varN)</emphasis> creates <literal>tout</literal> 
            from <literal>tin</literal> by adding the new variables <literal>var1, ..., varN</literal> at the end. 
            <literal>var1, ..., varN</literal> must have the same number of rows as <literal>tin</literal>.
        </para>
        <para>
            <emphasis role="bold">tout = addvars(tin, var1, ..., varN, "Before", loc)</emphasis> creates <literal>tout</literal> 
            from <literal>tin</literal> by adding the new variables <literal>var1, ..., varN</literal> before <literal>loc</literal>. 
            <literal>loc</literal> can be double or string value. If <literal>loc</literal> is a double, then it corresponds to the nth variable 
            in <literal>tin</literal>. If <literal>loc</literal> is a string, then it is the name of variable in <literal>tin</literal>
        </para>
        <para>
            <emphasis role="bold">tout = addvars(tin, var1, ..., varN, "After", loc)</emphasis> creates <literal>tout</literal> 
            from <literal>tin</literal> by adding the new variables <literal>var1, ..., varN</literal> after <literal>loc</literal>. 
        </para>
        <para>
            <emphasis role="bold">tout = addvars(..., "NewVariableNames", newvarnames)</emphasis> renames added variables 
            var1, ..., varN to <literal>newvarnames</literal>.
        </para>
    </refsection>
    <refsection role="example">
        <title>Examples</title>
        <para><emphasis role="bold">Add variable in table</emphasis></para>
        <para>
        <programlisting role="example"><![CDATA[
            t = table(["A"; "B"; "C"], [1; 2; 3], [4;5;6], "VariableNames", ["Key", "Value1", "Value2"])
            v1 = t.Value1 + t.Value2
            t2 = addvars(t, v1)

            v2 = t.Value2 - t.Value1
            t2 = addvars(t, v1, v2)
            ]]></programlisting>
            <screen><![CDATA[
--> t = table(["A"; "B"; "C"], [1; 2; 3], [4;5;6], "VariableNames", ["Key", "Value1", "Value2"])

t = [3x3 table]

Key   Value1   Value2
___   ______   ______
                    
A     1        4     
B     2        5     
C     3        6     

--> v1 = t.Value1 + t.Value2

v1 = [3x1 double]

5.
7.
9.

--> t2 = addvars(t, v1)

t2 = [3x4 table]

Key   Value1   Value2   Var4
___   ______   ______   ____
                            
A     1        4        5   
B     2        5        7   
C     3        6        9   

--> v2 = t.Value2 - t.Value1

v2 = [3x1 double]

3.
3.
3.

--> t2 = addvars(t, v1, v2)

t2 = [3x5 table]

Key   Value1   Value2   Var4   Var5
___   ______   ______   ____   ____
                                    
A     1        4        5      3   
B     2        5        7      3   
C     3        6        9      3 
                ]]></screen>
        </para>
        <para><emphasis role="bold">Add variable in timeseries</emphasis></para>
        <para>
        <programlisting role="example"><![CDATA[
            ts = timeseries(hours(1:3)', ["A"; "B"; "C"], [1; 2; 3], [4;5;6], "VariableNames", ["Hours", "Key", "Value1", "Value2"])
            v = [18;16;17];
            t2 = addvars(ts, v)
            ]]></programlisting>
            <screen><![CDATA[
 --> ts = timeseries(hours(1:3)', ["A"; "B"; "C"], [1; 2; 3], [4;5;6], "VariableNames", ["Hours", "Key", "Value1", "Value2"])

 ts = [3x3 timeseries]

    Hours     Key   Value1   Value2
   ________   ___   ______   ______
                                   
   01:00:00   A     1        4     
   02:00:00   B     2        5     
   03:00:00   C     3        6     

--> v = [18;16;17];
--> t2 = addvars(ts, v)

 t2 = [3x4 timeseries]

    Hours     Key   Value1   Value2   Var4
   ________   ___   ______   ______   ____
                                          
   01:00:00   A     1        4        18  
   02:00:00   B     2        5        16  
   03:00:00   C     3        6        17                 
                ]]></screen>
        </para>
        <para><emphasis role="bold">Add variable with "After" and "Before" keywords</emphasis></para>
        <para>
        <programlisting role="example"><![CDATA[
            Code = ["AF"; "NA"; "OC"; "AN"; "AS"; "EU"; "SA"];
            NameContinent = ["Africa"; "North America"; "Oceania"; "Antarctica"; "Asia"; "Europe"; "South America"];
            Area = [30065000; 24256000; 7687000; 13209000; 44579000; 9938000; 17819000]; // in km2
            NumberCountry = [54; 23; 14; %nan; 47; 45; 12]; 
            LifeExpectancy = [60; 78; 75; %nan; 72; 75; 74]; // in years

            t = table(Code, Area, "VariableNames", ["Code", "Area"])

            // add NameContinent variable before Code
            t2 = addvars(t, NameContinent, "Before", "Code")

            // to rename t2.Var3 variable, use "NewVariableNames" option
            t2 = addvars(t, NameContinent, "Before", "Code", "NewVariableNames", "NameContinent")

            // add NumberCountry and LifeExpectancy variables after Area
            t3 = addvars(t2, NumberCountry, LifeExpectancy, "After", "Area", "NewVariableNames", ["NumberCountry", "LifeExpectancy"])
            // can be replace by t3 = addvars(t2, NumberCountry, LifeExpectancy, "After", "Area", "NewVariableNames", {"NumberCountry", "LifeExpectancy"})
        ]]>
        </programlisting>
        <screen><![CDATA[
--> t = table(Code, Area, "VariableNames", ["Code", "Area"])

 t = [7x2 table]

   Code     Area  
   ____   ________
                  
   AF     30065000
   NA     24256000
   OC     7687000 
   AN     13209000
   AS     44579000
   EU     9938000 
   SA     17819000

--> // add NameContinent variable before Code
--> t2 = addvars(t, NameContinent, "Before", "Code")

 t2 = [7x3 table]

       Var3        Code     Area  
   _____________   ____   ________
                                  
   Africa          AF     30065000
   North America   NA     24256000
   Oceania         OC     7687000 
   Antarctica      AN     13209000
   Asia            AS     44579000
   Europe          EU     9938000 
   South America   SA     17819000

--> // to rename t2.Var3 variable, use "NewVariableNames" option
--> t2 = addvars(t, NameContinent, "Before", "Code", "NewVariableNames", "NameContinent")

 t2 = [7x3 table]

   NameContinent   Code     Area  
   _____________   ____   ________
                                  
   Africa          AF     30065000
   North America   NA     24256000
   Oceania         OC     7687000 
   Antarctica      AN     13209000
   Asia            AS     44579000
   Europe          EU     9938000 
   South America   SA     17819000

--> // add NumberCountry and LifeExpectancy variables after Area
--> t3 = addvars(t2, NumberCountry, LifeExpectancy, "After", "Area", "NewVariableNames", ["NumberCountry", "LifeExpectancy"])

 t3 = [7x5 table]

   NameContinent   Code     Area     NumberCountry   LifeExpectancy
   _____________   ____   ________   _____________   ______________
                                                                   
   Africa          AF     30065000   54              60            
   North America   NA     24256000   23              78            
   Oceania         OC     7687000    14              75            
   Antarctica      AN     13209000   Nan             Nan           
   Asia            AS     44579000   47              72            
   Europe          EU     9938000    45              75            
   South America   SA     17819000   12              74           
                ]]></screen>
        </para>
    </refsection>
    <refsection role="see also">
        <title>See also</title>
        <simplelist type="inline">
            <member>
                <link linkend="table">table</link>
            </member>
            <member>
                <link linkend="timeseries">timeseries</link>
            </member>
            <member>
                <link linkend="removevars">removevars</link>
            </member>
        </simplelist>
    </refsection>
    <refsection>
        <title>History</title>
        <revhistory>
            <revision>
                <revnumber>2025.1.0</revnumber>
                <revremark>Function added.</revremark>
            </revision>
        </revhistory>
    </refsection>
</refentry>
