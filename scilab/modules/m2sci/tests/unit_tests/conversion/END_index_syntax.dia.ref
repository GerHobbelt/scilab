// =============================================================================
// Scilab ( https://www.scilab.org/ ) - This file is part of Scilab
// Copyright (C) 2019 - Samuel GOUGEON
//
//  This file is distributed under the same license as the Scilab package.
// =============================================================================
//
// <-- CLI SHELL MODE -->
// <-- ENGLISH IMPOSED -->
//
// <-- GitLab URL -->
// https://gitlab.com/scilab/scilab/-/issues/16181
//
// <-- Short Description -->
// Unit tests for replacing the "end" index
// Load mandatory functions
exec("SCI/modules/m2sci/macros/kernel/isacomment.sci", -1);
exec("SCI/modules/m2sci/macros/kernel/isinstring.sci", -1);
exec("SCI/modules/m2sci/macros/kernel/sciparam.sci", -1);
exec("SCI/modules/m2sci/macros/kernel/m2sci_syntax.sci",-1);
txt = mgetl("SCI/modules/m2sci/tests/unit_tests/conversion/END_index_syntax.m");
fnam = "END_index_syntax"; // Set by mfile2sci in standard case
[_, txt, _] = m2sci_syntax(txt);
txt($+1) = "endfunction"; // Force function closure (done by mfile2sci in standard case)
printf("%s\n",txt);
function []=END_index_syntax()
 // end in comments
 // a(end:-1:2) in comments
a = [1 2 3 4 5 6 7]; 
k = 3 
endy = 4; 
b.end = 3 
if true, a=1, end, b=3 
if true then 
     // With matrices
     // -------------
a(b.end:end) = 1 
a(append) = 8 
a(endy:end) = 8 
a(1:endy:end) = 3 
 
a(end) = 7 
a(6:end) = [3 4] 
a(1,2:end) = [3 4] 
a(end,2:end) = [3 4] 
a(end,2:end-1) = 3 
a(end+1) = 8 
a(end-k) = 7 
a(6:end) = [3 4], a(end) = 5 
endy(3) = 4 
endy(end/2) = 7 
append(end:-1:2) = 1:endy 
 
a (b.end : end) = 1 
a (append ) = 8 
a (endy: end ) = 8 
a (1: endy: end) = 3 
 
a ( end ) = 7 
a (6 : end ) = [3 4] 
a (1, 2 : end ) = [3 4] 
a ( end , 2 : end ) = [3 4] 
a ( end , 2 : end - 1) = 3 
a ( end + 1) = 8 
a ( end - k) = 7 
a ( 6 : end ) = [3 4], a( end ) = 5 
endy (3) = 4 
endy ( end / 2) = 7 
append ( end : -1 : 2 ) = 1:endy 
 
     // With cells
     // ----------
a(b.end:end).entries = 1 
a(append).entries = 8 
a(endy:end).entries = 8 
a(1:endy:end).entries = 3 
 
a(end).entries = 7 
a(6:end).entries = [3 4] 
a(1,2:end).entries = [3 4] 
a(end,2:end).entries = [3 4] 
a(end,2:end-1).entries = 3 
a(end+1).entries = 8 
a(end-k).entries = 7 
a(6:end).entries = [3 4], a(end).entries = 5 
endy(3).entries = 4 
endy(end/2).entries = 7 
append(end:-1:2).entries = 1:endy 
 
a (b.end : end).entries = 1 
a (append ).entries = 8 
a (endy: end ).entries = 8 
a (1: endy: end).entries = 3 
 
a ( end ).entries = 7 
a (6 : end ).entries = [3 4] 
a (1, 2 : end ).entries = [3 4] 
a ( end , 2 : end ).entries = [3 4] 
a ( end , 2 : end - 1).entries = 3 
a ( end + 1).entries = 8 
a ( end - k).entries = 7 
a ( 6 : end ).entries = [3 4], a( end ).entries = 5 
endy (3).entries = 4 
endy ( end / 2).entries = 7 
append ( end : -1 : 2 ).entries = 1:endy 
 
end 
endfunction
execstr(txt);
